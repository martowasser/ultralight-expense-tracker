# Ralph Progress Log
Started: Wed Jan 21 00:10:20 -03 2026

## Codebase Patterns
- Uses Next.js App Router with server components and server actions
- Prisma ORM with PostgreSQL, uses PrismaPg adapter for runtime
- UI follows minimal design (no component library), uses Tailwind CSS with custom CSS variables
- Server actions return `{ success: boolean; error?: string }` for mutations
- Always check `session?.user?.id` in server actions for auth
- Use `router.refresh()` after mutations to refresh server components
- Seed files should be excluded from tsconfig to avoid compilation issues
- Use `npx tsx` for running TypeScript scripts like seeds
---

## 2026-01-21 - US-INV-032
- What was implemented: Database schema for investments module
- Files changed:
  - prisma/schema.prisma - Added Asset, Investment, Dividend, PortfolioSnapshot, PriceCache models
  - prisma/seed.ts - Created seed script for 30 pre-populated assets
  - package.json - Added db:seed script and prisma seed config
  - tsconfig.json - Excluded seed.ts from compilation
- **Learnings for future iterations:**
  - Prisma client is generated to src/generated/prisma/client
  - Currency enum expanded to 10 currencies (ARS, USD, EUR, GBP, JPY, CAD, AUD, CHF, CNY, BRL)
  - Asset precision: 6 for crypto, 2 for stocks/ETFs
  - UserSettings model exists and was extended with displayCurrency and preferredCurrencies
  - Investment model supports lot tracking with separate purchases of same asset
  - PriceCache uses symbol as primary key for efficient lookups
---
