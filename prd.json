{
  "project": "Monthly Expense Tracker - Comprehensive Edition",
  "branchName": "ralph/expense-tracker-v2",
  "description": "A web application for users with complex financial situations involving multiple banks, credit cards, currencies, and income sources. Helps track monthly recurring expenses, understand cash flow across accounts, and plan payments.",
  "userStories": [
    {
      "id": "US-020",
      "title": "Create Institution Management",
      "description": "As a user, I want to add and manage my financial institutions (banks, fintech apps, crypto exchanges) so I can organize my credit cards and accounts by institution.",
      "acceptanceCriteria": [
        "Can add institution with name and type (Bank, Fintech, Crypto Exchange, Payment Platform)",
        "Can edit institution name and type",
        "Can delete institution (with confirmation, cascades to accounts and cards)",
        "Institutions page shows all institutions grouped by type",
        "Typecheck passes"
      ],
      "priority": 1,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-021",
      "title": "Create Account Management",
      "description": "As a user, I want to add accounts within my institutions so I can track which account pays which expenses.",
      "acceptanceCriteria": [
        "Can add account to an institution with name and currency (ARS/USD)",
        "Can edit account details",
        "Can delete account",
        "Accounts shown under their institution on the institutions page",
        "Typecheck passes"
      ],
      "priority": 2,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-022",
      "title": "Create Credit Card Management",
      "description": "As a user, I want to add and manage my credit cards so I can track my credit card payments and link expenses to cards.",
      "acceptanceCriteria": [
        "Dedicated /credit-cards page",
        "Can add credit card with: institution, name, brand (VISA/MC/AMEX/Other), last 4 digits (optional), due day",
        "Can edit credit card details",
        "Can delete credit card",
        "Cards grouped by institution on the page",
        "Typecheck passes"
      ],
      "priority": 3,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-023",
      "title": "Add Multi-Currency Support to Expenses",
      "description": "As a user, I want to track expenses in both ARS and USD so I can accurately track my USD rent and other foreign currency expenses.",
      "acceptanceCriteria": [
        "Expense form includes currency selector (ARS/USD)",
        "USD expenses show approximate ARS equivalent on dashboard",
        "Monthly totals show separate ARS and USD amounts",
        "Existing expenses default to ARS",
        "Typecheck passes"
      ],
      "priority": 4,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-024",
      "title": "Add Expense Categories",
      "description": "As a user, I want to categorize my expenses so I can see my expenses organized by type on the dashboard.",
      "acceptanceCriteria": [
        "Expense form includes category dropdown with fixed options",
        "Categories: Credit Card, Service, Rent, Insurance, Tax, Subscription, Building Fee, Other",
        "Dashboard groups expenses by category",
        "Category subtotals shown per category",
        "Empty categories hidden",
        "Existing expenses default to Other category",
        "Typecheck passes"
      ],
      "priority": 5,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-025",
      "title": "Add Payment Method to Expenses (Progressive Disclosure)",
      "description": "As a user, I want to optionally specify how I pay each expense so I can track which account or card pays what.",
      "acceptanceCriteria": [
        "Expense form has collapsible 'More options' section",
        "More options includes: payment method, payment source account, paid with card",
        "Payment methods: Bank Transfer, Direct Debit, Cash, Crypto Exchange, Credit Card",
        "If 'Credit Card' selected, show card selector",
        "If other methods, show account selector (optional)",
        "All payment fields are optional",
        "Typecheck passes"
      ],
      "priority": 6,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-026",
      "title": "Create Credit Card Payment Expense Type",
      "description": "As a user, I want to easily add my monthly credit card payments so I can track when each card is due.",
      "acceptanceCriteria": [
        "When category is 'Credit Card', show card selector",
        "Selected card links the expense to that credit card",
        "Due day auto-fills from card's due day",
        "Name auto-fills with card name (editable)",
        "Typecheck passes"
      ],
      "priority": 7,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-027",
      "title": "Enhanced Clone Behavior for Credit Cards",
      "description": "As a user, I want credit card expenses to clone with $0 when I clone from previous month so I'm forced to enter the actual statement amount.",
      "acceptanceCriteria": [
        "When cloning, expenses with category 'Credit Card' have amount set to 0",
        "Other expense types clone with their previous amount",
        "User can still edit all amounts before confirming clone",
        "Typecheck passes"
      ],
      "priority": 8,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-028",
      "title": "User Settings Page",
      "description": "As a user, I want to configure my exchange rate so USD expenses show accurate ARS equivalents.",
      "acceptanceCriteria": [
        "Settings page accessible from header menu",
        "Can set USD to ARS exchange rate",
        "Rate used to calculate ARS equivalent for USD expenses",
        "Default rate is 1200 (configurable)",
        "Typecheck passes"
      ],
      "priority": 9,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-029",
      "title": "Database Migration for New Schema",
      "description": "As a developer, I want to migrate the database to support new models so the app can handle institutions, accounts, cards, and enhanced expenses.",
      "acceptanceCriteria": [
        "New Prisma schema with all new models: Institution, Account, CreditCard, ExpenseTag, UserSettings",
        "Add new fields to Expense: category, currency, paymentMethod, paymentSourceId, paidWithCardId, linkedCreditCardId, isActive",
        "Migration runs successfully",
        "Existing users' expenses preserved",
        "Existing expenses get default values (category=OTHER, currency=ARS)",
        "Typecheck passes"
      ],
      "priority": 0,
      "passes": true,
      "notes": "This should run first before other stories since it sets up the schema"
    }
  ]
}
